var LGPopDomains;(function(n){function ht(n,i,r,u,p,w,b,d,g,nt,tt,rt,ut){var ft,ot,et;if(nt===void 0&&(nt=!1),tt===void 0&&(tt=!1),rt===void 0&&(rt=!0),ut===void 0&&(ut=!0),l=n.split("|"),e=r.split("|"),a=d.split("|"),v=g.split("|"),c=u,k=b,o=p,st=nt,s=!o&&tt,y=rt,f=ut,ct(),ft=lt(l,w),!LGUtility.isRenderFeature(t)||at()||ft.length==0||!ii())return it(),null;if(ot=_ge(t+"CtaBtn"),et=LGUtility.getInstVals(ot),LGUtility.instLogRender(t,h,et.appNS,et.kValue),i){it();return}nt?vt(ft):yt(ft)}function ct(){var n={name:"Search",checkToAdd:function(){return!!_ge("uaseabox")},callback:function(){_ge("uaseabox").focus()}};u.push(n);a.push("Search");v.push("b_lgpd_srch")}function lt(n,i){for(var w,c,b,f=[],e=[],h=[],l=_d.querySelectorAll(".b_algo h2 a"),a=-1,v=-1,o=[],p=[],r=0;r<u.length;r++)u[r].checkToAdd()&&(w={ad:null,algo:null,algoNum:-1,domain:u[r].name,domainName:u[r].name,specialCase:!0,callback:u[r].callback},f.push(w),e.push(u[r].name));for(s&&!y&&g(n,i,e,h,o),r=0;r<l.length;r++)c=l[r],b=tt(c.hostname),d(n,b,i,e,h,p,null,c,!0,r);return s&&y&&g(n,i,e,h,o),nt(p,v,a,f),s&&!!o&&(Log.Log("LeftGutterModule",t,"AddBopTA",!1),nt(o,v,a,f)),f}function d(n,t,i,r,u,f,o,s,h,c){var y,l,a,p,v;h===void 0&&(h=!1);c===void 0&&(c=-1);y=h?s:o;l=n.indexOf(t);l>=0&&u.indexOf(l)==-1&&y.getBoundingClientRect&&r.indexOf(e[l])==-1&&(a=y.getBoundingClientRect(),p=a&&a.top>=0&&a.bottom<=_w.innerHeight,i&&p||(v=void 0,v=h?{ad:null,algo:s,algoNum:c,domain:t,domainName:e[l],specialCase:!1,callback:null}:{ad:o,algo:null,algoNum:c,domain:t,domainName:e[l],specialCase:!0,callback:function(){ut(o)}},f.push(v),r.push(v.domainName)),u.push(l))}function g(n,t,i,r,u){var h=_d.querySelector(".b_adBottom"),f,o,s,e,c;if(h&&(f=h.querySelectorAll("li"),!!f&&!!f[0]))for(o=0;o<f.length;o++)(s=f[o],e=s.querySelector(".b_attribution cite"),!e||!e.textContent||e.textContent.split("/").length<=2)||(c=tt(e.textContent.split("/")[2]),d(n,c,t,i,r,u,s,null))}function nt(n,t,i,r){for(var e,u,f=0;f<n.length;f++){if(e=n[f],u=e.domain,u=="tripadvisor.com"&&t>-1)r.splice(t,1),t=-1;else if(u=="yelp.com"&&i>-1)continue;r.push(e);u=="tripadvisor.com"?i=r.length-1:u=="yelp.com"&&(t=r.length-1)}}function tt(n){return n.indexOf("www.")==0?n.substring(4):l.indexOf(n)<0&&n.indexOf(".")>=0?n.substring(n.indexOf(".")+1):n}function at(){var n,t,i;if(!!_d.querySelector(".pa_carousel"))return!0;if(n=_ge("b_results"),n)for(t=0;t<n.children.length;t++){if(i=n.children[t],Lib.CssClass.contains(i,"b_algo"))break;if(Lib.CssClass.contains(i,"b_ad"))return!0}return!1}function it(){var n=_ge(t+"Container");n&&n.parentElement&&n.parentElement.removeChild(n)}function vt(n){for(var u,e,s,o=[],r=0;r<n.length;r++)u={imgUrl:null,desc:null},e=sj_ce("span"),e.innerText=n[r].domainName,u.desc=e,o[r]=u;for(LGWidget.initNavWidget(t,c,o),i=_ge(t+"Container"),s=function(i){var r=_ge(t+"_lgw_link"+i),u=_ge(t+"_lgw_fav"+i);u&&ft(n[i].domain,u);f&&n[i].algo&&n[i].algo.href&&n[i].algo.href!=""&&r.setAttribute("data-url",n[i].algo.href);f&&n[i].ad&&n[i].ad.textContent&&n[i].ad.textContent!=""&&r.setAttribute("data-url",n[i].ad.textContent);sj_be(r,"click",function(){rt(n[i])})},r=0;r<n.length&&r<6;r++)s(r)}function yt(n){var t=sj_ce("div",null,"b_lgpd_cont"),u=sj_ce("div",null,"b_lgpd_title"),e,r;for(u.innerText=c,t.appendChild(u),e=function(i){var r=sj_ce("div",null,"b_lgpd_site"),u=sj_ce("div",null,"b_lgpd_fav"),e=sj_ce("div",null,"b_lgpd_name");e.innerText=n[i].domainName;f&&n[i].algo&&n[i].algo.href&&n[i].algo.href!=""&&r.setAttribute("data-url",n[i].algo.href);f&&n[i].ad&&n[i].ad.innerText&&n[i].ad.innerText!=""&&r.setAttribute("data-url",n[i].ad.innerText);r.appendChild(u);r.appendChild(e);ft(n[i].domain,u);sj_be(r,"click",function(){rt(n[i])});sj_be(r,"mouseenter",kt);sj_be(r,"mouseleave",dt);t.appendChild(r)},r=0;r<n.length;r++)e(r);sj_be(t,"mouseenter",ni);t&&i&&p&&b&&(i.appendChild(t),p.insertBefore(i,b))}function pt(n){if(!r){r=sj_ce("div",ot,"b_hide");var u=sj_ce("div",null,"b_lgpd_gt"),e=sj_ce("div",null,"b_lgpd_gti"),f=sj_ce("span");f.innerText=k;u.appendChild(e);u.appendChild(f);r.appendChild(u);sj_be(r,"click",function(){si_ct(_ge("PopDomainsInstLink"));Log.Log("LeftGutterModule",t,"GoTopClick",!1);_w.scrollTo({top:0,behavior:"smooth"});wt()});i.appendChild(r)}bt(n)}function wt(){Lib.CssClass.add(r,"b_hide")}function bt(n){var u=i.getBoundingClientRect(),t=n.getBoundingClientRect();r.style.top=(t.y-u.y+t.height/2-18).toString()+"px";Lib.CssClass.remove(r,"b_hide")}function rt(n){var u=_ge(t+"CtaBtn"),i=LGUtility.getInstVals(u),r;if(LGUtility.instLogClick(t,h,i.appNS,i.kValue),Log.Log("LeftGutterModule",t,"PillClick",!1,"domain",n.domain,"position",n.algoNum.toString()),n.specialCase){n.callback();return}o?(si_ct(n.algo),n.algo.click()):(r=gt(n.algo),ut(r))}function ut(n){var t=n.getBoundingClientRect&&n.getBoundingClientRect();!o&&t&&t.y>=_w.innerHeight&&pt(n);n.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"});Lib.CssClass.add(n,"b_lgpd_flash");sb_st(function(){Lib.CssClass.remove(n,"b_lgpd_flash")},3e3)}function kt(){Lib.CssClass.add(i,"b_lgpd_hov")}function dt(){Lib.CssClass.remove(i,"b_lgpd_hov")}function gt(n){for(var t=n;t;){if(Lib.CssClass.contains(t,"b_algo"))return t;t=t.parentElement}return n}function ni(){var i=_ge(t+"CtaBtn"),n=LGUtility.getInstVals(i);LGUtility.instLogHover(t,h,n.appNS,n.kValue)}function ft(n,t){var i=a.indexOf(n),r;if(i>=0){Lib.CssClass.add(t,v[i]);return}r="/favicon/hash?domain="+n;sj_ajax(r,{callback:function(n,i){var u,r=(u=i===null||i===void 0?void 0:i.request)===null||u===void 0?void 0:u.response,f,e;n&&i&&r!=""&&(f=r.indexOf("<!--<!"),e=f>-1?r.substring(0,f).trim():r,ti(e,t))}})}function ti(n,i){var u="/th?id=ODF."+n+"&pid=Api&w=42&h=42&dpr=1.5",r=sj_gx();r.open("HEAD",u,!0);r.onreadystatechange=function(){var n;r.readyState==4&&(r.status==404?(n=sj_ce("div",null,"b_lgpd_nofav"),i.appendChild(n)):(n=sj_ce("img",null,"b_favImg"),n.src=u,n.width=42,n.height=42,i.appendChild(n)))};r.onerror=function(){Log.Log("LeftGutterModule",t,"FaviconFailure",!1,"id",n)};r.send()}function ii(){return w?parseInt(getComputedStyle(w)[et])>=160:!1}var t="LGPopDomains",h="LeftGutterWidget",c="On this page:",et=_G.RTL?"paddingRight":"paddingLeft",p=_d.querySelector("#b_content main"),w=_ge("b_content"),b=_ge("b_results"),i=sj_ce("div","b_lgpd",null),ot="b_lgpd_gtcont";i.setAttribute("data-priority","2");var l=[],e=[],o=!1,k="Go to top",r,a=[],v=[],st=!1,u=[],s=!1,y=!0,f=!0;n.init=ht;sj_evt.fire("LGPopDomInit")})(LGPopDomains||(LGPopDomains={}))